---
layout: post
title: 함수형 프로그래밍의 장점
date: 2017-09-20 00:00:00 +09:00
desc: ""
keywords: "fp,function programming,함수형,함수"
categories: [CS]
tags: [FP]
icon: icon-html
---


산업에서 주로 사용되는 명령형 프로그래밍은 객체의 상태를 바꾸면서 동작하는 것을 강조합니다. 기존에 OOP 언어에서 설계된 클래스 역시 기본적으로 Setter를 통해 필드를 캡슐화하고 상태를 변경하도록하여 동작합니다.

반면 **함수형 프로그래밍이란 부수효과가 없는 순수 함수 만으로 프로그램을 작성하는** 방식을 말합니다. 예를들어, 객체의 상태를 캡슐화 하고 제자리에서 상태를 변경하기 보다 새로운 상태를 반환하므로써 동작합니다. 

부수효과가 없는 함수는 참조투명성을 갖는 함수를 뜻합니다. 참조 투명성이란 표현식의 성질중 하나입니다. 프로그램내의 특정 표현식의 모든 출현을 평가 결과로 치환해도 프로그램에 아무런 영향을 미치지 않는다면 그 표현식을 **참조 투명하다고(referentially transparent)** 할 수 있습니다. **부수효과가 없다고 하여 표현할 수 있는 프로그램의 종류가 줄어든다는 의미는 아닙니다. 프로그램을 작성하는 방식에 제약을 주는 것 입니다.**

{% highlight java%}
//r1과 r2는 같은 값이다
StringBuilder sb = new StringBuilder("Java");
StringBuilder x = sb.append(", Hello");
String r1 = x.toString();
String r2 = x.toString();

//평가의 결과로 치환해도 외부에 영향이 없을 경우 참조 투명하다.
StringBuilder sb = new StringBuilder("Java");
String r1 = sb.append(", Hello").toString();
String r2 = sb.append(", Hello").toString();
//x를 평가의 결과로 치환하였을때 생성되는 값이 달라진다.
{% endhighlight %}

[대표적인 함수형 언어](https://ko.wikipedia.org/wiki/%ED%95%A8%EC%88%98%ED%98%95_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)로 하스켈, 스칼라, 리스프 등이 있습니다. 모든 함수형 언어가 참조투명한 표현식만 갖는 것은 아닙니다. 스칼라같은 함수형 언어는 상태 변경 코드를 허용하면서도 그런 코드를 지양하고 있습니다.

**함수형 프로그래밍은 개발 생산성에 좋은 영향을 미치며 기존에 알려진 좋은 실천방법을 자연스럽게 사용할 수 있습니다. 대표적인 장점은 다음과 같습니다.**

**함수적 프로그램은 코드의 동작을 추론하기 쉽습니다.** 함수를 호출하는 코드를 함수 본문으로 치환할 수 있으며, 이는 개발자가 치환모형을 통해 코드를 분석할 수 있도록 도와줍니다. 즉, 국소 추론만으로 프로그램의 동작을 빠르게 분석할 수 있습니다.

**두번째로 느슨히 결합된 모듈이나 쓰레드간 객체를 안전하게 공유할 수 있습니다.** 자료구조나 객체가 불변이므로 모듈간 객체 전달시 변이를 막기 위해 방어적 복사본을 만들 필요가 없습니다. 또한 항상 객체가 스레드 안전(thread-safe)합니다. 즉, 개발자가 암묵적이나 명시적인 뮤택스나 락을 고려하며 코딩할 필요가 없습니다. (공유자원을 접근하는 코드를 작성할때 레이스 컨디션, 메모리 가시성, 데드락 문제가 발생할 수 있으므로 언어나 라이브러리를 통해 해결해야 합니다.)

**세번째로 함수형 프로그래밍은 모듈성과 재사용성을 높입니다.** 프로그램은 재사용 가능하고, 합성 가능한 컴포넌트로 구성됩니다. 즉 컴포넌트는 인자로 입력을 받아 출력을 반환할 뿐 어떤 부수효과도 일으키지 않습니다. 부수효과를 제거한 덕분에 컴포넌트를 블랙박스 처럼 사용될 수 있으며, 별도의 검증 없이도 쉽게 재사용이 가능합니다. 국소적으로는 Future, Option의 고차함수를 이용해 여러가지 로직을 합성할 수 있습니다.

**마지막으로 함수적 코드는 테스트 하기 쉽습니다.** 함수에 부수효과나 상태가 없어 버그를 **재현(reproducibility)하기** 쉬우며, 함수가 부수효과와 분리되어 존재하므로 테스트를 작성하기 쉽습니다. 반면 부수효과가 있는 코드는 버그를 재현하기 어려우며 테스트하기 까다롭습니다.

### 참조

- 함수형 프로그래밍 : 스칼라로 배우는 함수형 프로그래밍(서적)
